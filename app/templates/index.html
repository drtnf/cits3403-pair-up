{% extends "base.html" %}

{% block content %}
  <script>
    function confirm_delete(){
      conf = confirm("Are you sure you want to delete the project. This is irreversible.");
      if(conf){
        window.location.replace({{ url_for("delete_project") }});
      }
      return;
    }
  </script>


  <div class='table-responsive'>
  {% if projects %}
  <p>
  Group-Up is a sample Flask application for CITS3403/CITS5505 students to register
  student groups for the project, and book demonstration times.
  To get started, register an account, and then enter your project team details.
  </p>
  <h3>Registered project list</h3>
  <table class='table table-striped table-bordered'>
    <tr>
      <th>#</th>
      <th>Project Team</th>
      <th>Project Description</th>
      <th>Demo location</th>
      <th>Demo time</th>
      {% if not current_user.project_id == None %}
        <th>Action</th>
      {% endif %}
    </tr>  
    {% for p in projects%}
      <tr>
        <td>{{loop.index}}</td>
        <td>{{p['team']}}</td>
        <td>{{p['description']}}</td>
        <td><a href='{% if p['lab'][16]=='A'%}https://teams.microsoft.com/l/meetup-join/19%3a958d1639d0d94e2f8675beccd41f83c3%40thread.skype/1651211888082?context=%7b%22Tid%22%3a%2205894af0-cb28-46d8-8716-74cdb46e2226%22%2c%22Oid%22%3a%22934afb4b-fd30-4f7d-a03f-3ca26ef8270d%22%7d
        {% else %}https://teams.microsoft.com/l/meetup-join/19%3a823fd432f20f4ce2bd79fffb23f20e53%40thread.skype/1651211968209?context=%7b%22Tid%22%3a%2205894af0-cb28-46d8-8716-74cdb46e2226%22%2c%22Oid%22%3a%22934afb4b-fd30-4f7d-a03f-3ca26ef8270d%22%7d
        {% endif %}
            '>{{p['lab'][10:]}}</a></td>
        <td>{{p['time']}}</td>
        {% if not current_user.project_id==None %}
          <td>
          {% if p['project_id']== current_user.project_id %}
            <a href='{{ url_for("edit_project") }}'><span class="glyphicon glyphicon-edit"></span>Edit</a></br>
            <a href='{{url_for("delete_project") }}'><span class="glyphicon glyphicon-trash"></span>Delete</a>
          {% endif %}
          </td>
        {% endif %}  
    </tr>
    {% endfor %}
  </table>
  {% endif%}
  </div>
{% endblock %}

